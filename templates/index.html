<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Chatbot H·ªèi ƒê√°p</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #f4f4f4; }
        #chat-history { background: white; padding: 15px; border-radius: 8px; max-width: 800px; margin: auto; }
        .entry { margin-bottom: 20px; border-bottom: 1px solid #ccc; padding-bottom: 10px; }
        .question { font-weight: bold; color: #2c3e50; }
        .answer { margin-top: 5px; color: #34495e; }
    </style>
</head>
<body>
    <h2>Chatbot H·ªèi ƒê√°p t·ª´ PDF v√† JSON</h2>

    <form id="chat-form">
        <input type="text" name="question" id="question" placeholder="Nh·∫≠p c√¢u h·ªèi..." required style="width:70%;">
        <button type="submit">G·ª≠i</button>
    </form>

    <br>

    <div id="chat-history">
        <!-- L·ªãch s·ª≠ h·ªèi ƒë√°p s·∫Ω ƒë∆∞·ª£c ch√®n v√†o ƒë√¢y -->
    </div>

    <script>
        const form = document.getElementById("chat-form");
        const questionInput = document.getElementById("question");
        const chatHistoryDiv = document.getElementById("chat-history");

        form.addEventListener("submit", async (e) => {
            e.preventDefault();
            const formData = new FormData(form);

            const response = await fetch("/ask", {
                method: "POST",
                body: formData
            });

            const data = await response.json();

            if (data.error) {
                alert(data.error);
            } else {
                chatHistoryDiv.innerHTML = ""; // X√≥a tr∆∞·ªõc khi hi·ªÉn th·ªã l·∫°i to√†n b·ªô
                data.history.forEach(item => {
                    const entry = document.createElement("div");
                    entry.className = "entry";
                    entry.innerHTML = `
                        <div class="question">ü§î <strong>C√¢u h·ªèi:</strong> ${item.question}</div>
                        <div class="answer">üí° <strong>Tr·∫£ l·ªùi:</strong><br>${item.answer}</div>
                    `;
                    chatHistoryDiv.appendChild(entry);
                });

                // Xo√° n·ªôi dung input
                questionInput.value = "";
            }
        });
    </script>
</body>
</html>
